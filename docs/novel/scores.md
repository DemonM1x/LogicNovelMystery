
# Правила вычисления очков за игру и рейтинга игрока

### Одиночная игра

- Для расчета очков примем за максимальное количество очков,
которое можно набрать константу 10000.

- Количество очков, полученных за каждый уровень будет зависеть от:
  - количества ошибок, допущенных на текущем уровне.
  - текущего уровня, в зависимости от сложности задания и этапа,
   на котором задание выполняется.

- Формула для расчета очков будет выглядеть следующим образом:


$$Score_i = MaxPoints * \frac{i^k}{S} * (1 - PenaltyPercent * errors_i)$$

- Score_i - количество очков, которые игрок набирает в i-ом задании
- MaxPoints - общее число очков
- i - номер текущего задания
- k - коэффициент роста (насколько будет увеличиваться количество очков за задание)
- n - количество заданий
- S - сумма всех значений $i^k$, чтобы общее число очков было равно MaxPoints
  (при идеальном раскладе)
- PenaltyPercent - процент, который отнимается за каждую ошибку
  от общего числа очков за задание
- errors_i - количество ошибок, сделанных в задании

Итого мы имеем:
- MaxPoints = 10000
- k = 1 (на данный момент)
- $S = \sum_{1}^{n} i^1 = 55
- PenaltyPercent = 5% = 0.05

Тогда формула будет выглядеть следующим образом:

$$Score_i = 10000 * \frac{i}{55} * (1 - 0.05 * errors_i)$$

В данном случае получается, что наибольшее количество очков игрок будет
зарабатывать за последние задания, за последнее задание игрок может получить
в 10 раз больше очков, чем за первое.

Данное распределение является опциональным, мы можем перераспределить эти
коэффициенты в зависимости от сложности того или иного задания.

### Пример штрафов:
Допустим, игрок допустил 1 ошибку в 4-м задании и 2 ошибки в 7-м задании,
при этом штраф за ошибку 5%.
$$Score_4 = 10000 * \frac{4}{55} * (1 - 0.05 * 1) = 690.91$$
$$Score_7 = 10000 * \frac{7}{55} * (1 - 0.05 * 2) = 1145.45$$

Общая сумма будет составлять - 9836.36 очков

### Многопользовательская игра

Изначально игроки проходят свою кампанию, поэтому формула для расчета будет
схожа с одиночной игрой, только теперь общее количество очков разделено на
двоих игроков:

$$Score_i = \frac{MaxPoints}{2} * \frac{i^k}{S} * (1 - PenaltyPercent * errors_i)$$

- MaxPoints = 10000 - общее количество очков для обоих игроков, то есть
  каждый игрок по отдельности может получить 5000 очков.

- Для многопользовательских заданий выделяется 5000, допустим будет 2 задания
 на совместную игру, тогда можем использовать ту же формулу, что и для
 одиночной игры, если задания будут разной сложности:

$$Score_{joint,i} = 5000 * \frac{i^k}{S} * (1 - PenaltyPercent_{joint} * errors_{joint,i})
- PenaltyPercent = 10% = 0.1

### Общее количество очков на команду:

$$TotalScore = \sum_{i,j=1}^{10} Score_{i,j} + \sum_{i=1}^{2} Score_{joint,i}

max(TotalScore) = 15000



